---
title: "åœ¨ç¾¤æ™– DS220+ ä¸Šä½¿ç”¨ Homebrew"
date: 2023-05-20T12:00:16+09:00
draft: false
tags: ["ç¾¤æ™–", "synology", "ds220+", "homebrew"]
keywords: ["ç¾¤æ™–", "synology", "ds220+", "homebrew"]
slug: "using-homebrew-on-synology-diskstation-ds220+"
icon: ğŸº
---

æœ€è¿‘è¶ç€æ‰“æŠ˜åŠ ä¸Šä¸€äº›è¿”ç‚¹ï¼Œå®¶é‡Œä¹°äº†ä¸€å°ç¾¤æ™–çš„ DS220+ï¼ŒåŠ ä¸Šä¸€å— 8T çš„ç¡¬ç›˜å’Œ 16G çš„å†…å­˜ï¼Œé¢„ç®—æ§åˆ¶åœ¨äº† 5.5 ä¸‡æ—¥å…ƒå·¦å³ã€‚

è´­ç‰©æ¸…å•å¦‚ä¸‹ï¼š

- [Synology DiskStation DS220+](https://kakaku.com/item/K0001257428/)
- [SEAGATE ST8000DM004 [8TB SATA600 5400]](https://kakaku.com/item/K0001026180/)
- [CFD Selection D4N2666CM-16GR [SODIMM DDR4 PC4-21300 16GB]](https://kakaku.com/item/K0001324104/)

<!--more-->

## ç”¨é€”

ä¸»è¦æƒ³ç”¨æ¥å­˜å‚¨ç…§ç‰‡ï¼Œä¸‹è½½çš„æ–‡ä»¶ï¼Œä»¥åŠæ–¹ä¾¿å®¶é‡Œå…±äº«æ–‡ä»¶ç­‰ã€‚

è™½ç„¶æ˜¯ 3 å¹´å‰çš„äº§å“ä½†æ„Ÿè§‰ä»·æ ¼åˆé€‚ï¼Œæ€§èƒ½è¶³å¤Ÿï¼Œå¦å¤–æ¯”èµ·æ–°å‡ºçš„ ARM æ¶æ„çš„æ–°æ¬¾ï¼Œæˆ‘è¿˜æ˜¯æ¯”è¾ƒå–œæ¬¢ x86_64 çš„æœºå™¨ï¼Œæ„Ÿè§‰è½¯ä»¶ç”Ÿæ€ä¼šæ›´ä¸°å¯Œä¸€äº›ã€‚

ç›®å‰åªç”¨äº†ä¸€ä¸ªç›˜ä½ï¼Œä¹‹åå¯èƒ½ä¼šåœ¨åˆé€‚çš„æ—¶å€™å†å…¥æ‰‹ä¸€å—ã€‚

## è½¯ä»¶

ç¬¬ä¸€æ¬¡ä½“éªŒç¾¤æ™–çš„ç³»ç»Ÿï¼Œæ„Ÿè§‰æ˜“ç”¨æ€§è¿˜æ˜¯ç›¸å½“ä¸é”™çš„ï¼Œè·Ÿç”¨æ™ºèƒ½æœºå·®ä¸é”™ã€‚è‡ªå¸¦çš„è½¯ä»¶å•†åŸä¹Ÿé›†æˆäº†ä¸å°‘è½¯ä»¶ã€‚

ä½†æ˜¯å¯¹äºä¸€äº›æˆ‘æ—¥å¸¸ç”¨çš„å‘½ä»¤è¡Œè½¯ä»¶ï¼Œæ„Ÿè§‰å°±ä¸æ˜¯è¿™ä¹ˆæ–¹ä¾¿äº†ã€‚æˆ‘æœ€è¿«åˆ‡æƒ³ä½¿ç”¨çš„è½¯ä»¶ç›®å‰æœ‰ï¼š

- [rclone](https://github.com/rclone/rclone)
- [yt-dlp](https://github.com/yt-dlp/yt-dlp)

è™½è¯´ä¹Ÿå¯ä»¥æ‰‹åŠ¨å®‰è£…å®ƒä»¬ï¼Œä½†ä¹‹åå‡çº§ç»´æŠ¤å®ƒä»¬ææ€•ä¸æ–¹ä¾¿ï¼Œäºæ˜¯æˆ‘å°±å‚è€ƒä¹‹å‰æŠ˜è…¾ Chromebook çš„ç»éªŒï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯èƒ½ç”¨ä¸Šä¸ªåŒ…ç®¡ç†è½¯ä»¶ã€‚

è¦æ˜¯å¯ä»¥æˆ‘å½“ç„¶è¿˜æ˜¯å¸Œæœ›å¯ä»¥ç”¨ä¸Š Arch çš„ pacmanï¼Œä½†ä¼°è®¡ä¸ä½¿ç”¨ Docker æˆ–è€… VM æ€•æ˜¯æœ‰éš¾åº¦ï¼Œä½†ä¸ºäº†ä¸ªæŠŠè½¯ä»¶åˆæ„Ÿè§‰å¤ªæŠ˜è…¾äº†ã€‚

## Homebrew

äºæ˜¯é€€è€Œæ±‚å…¶æ¬¡ï¼Œæ‰¾åˆ°äº† [Homebrew](https://brew.sh)ã€‚å¯èƒ½ macOS ç”¨æˆ·ç”¨ Homebrew æ¯”è¾ƒå¤šï¼Œä½†æ˜¯å¯¹äºä¸€äº›ä¸æ˜¯å¾ˆä¸»æµçš„ Linux ç³»ç»Ÿï¼ŒHomebrew æˆ‘ä¸ªäººæ„Ÿè§‰ä¹Ÿæ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œè½¯ä»¶ä¹Ÿéƒ½å¾ˆæ–°ï¼Œè¿˜ä¸ç”¨è‡ªå·±ç¼–è¯‘ã€‚å®‰è£…æ–¹æ³•å’Œ macOS æ²¡æœ‰ä»€ä¹ˆä¸åŒï¼Œåªæ˜¯å¯¹äºç¾¤æ™–çš„ç³»ç»Ÿï¼Œå®‰è£… Homebrew å‰éœ€è¦ç¨åŠ æ”¹åŠ¨è€Œå·²ï¼Œç†è®ºä¸Šåº”è¯¥å¯¹ç³»ç»Ÿæœ¬èº«ä¸ä¼šæœ‰ä»»ä½•ç ´åã€‚

è¿‡ç¨‹ä¸»è¦å‚è€ƒäº† [Installing Homebrew on DSM: done! | Synology Community](https://community.synology.com/enu/forum/1/post/153781) è¿™ä¸ªå¸–å­ï¼Œè¿™é‡Œåšä¸‹æ€»ç»“ã€‚

ä¸»è¦çš„æ”¹åŠ¨å®é™…ä¸Šä¹Ÿå°±ä¸¤ç‚¹ï¼š

1. Homebrew çš„å®‰è£…è„šæœ¬æœ‰ä¸€è¡Œä¼šæ‰§è¡Œ `ldd --version` ç„¶è€Œç¾¤æ™–çš„ç³»ç»Ÿæ²¡æœ‰ `ldd` è¿™ä¸ªå‘½ä»¤
2. Homebrew on Linux å»ºè®®æœ€å¥½å®‰è£…åœ¨ `/home/linuxbrew/.linuxbrew` ä¸‹ï¼Œç„¶è€Œç¾¤æ™–ç³»ç»Ÿçš„ç”¨æˆ·ç›®å½•åœ¨ `/volume1/homes` ä¸‹

å¯¹äº 1ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ª `/usr/bin/ldd` å†…å®¹å¦‚ä¸‹ï¼š

```bash
#!/bin/bash
[[ $(/usr/lib/libc.so.6) =~ version\ ([0-9]\.[0-9]+) ]] && echo "ldd ${BASH_REMATCH[1]}"
```

ç„¶åç»™æ‰§è¡Œæƒé™ï¼š`chmod 755 /usr/bin/ldd` å³å¯ã€‚è¿™ä¸€æ­¥ä»…ä»…ç”¨æ¥è®© Homebrew çš„å®‰è£…è„šæœ¬è·çŸ¥ glibc çš„ç‰ˆæœ¬è€Œå·²ï¼Œç”šè‡³å¯ä»¥ç›´æ¥ `echo "ldd 2.26"` è¿™æ ·ç¡¬ç¼–ç ã€‚

å¯¹äº 2ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤

```bash
sudo mkdir /home
sudo mount -o bind "/volume1/homes" /home
```

è¿™æ ·å°±å¯ä»¥å‘é€šå¸¸çš„ Linux ç³»ç»Ÿä¸€æ ·è®¿é—® `/home` äº†ï¼Œè¿™é‡Œæ¨èè®©ç¾¤æ™–çš„ç³»ç»Ÿå¼€æœºå¯åŠ¨æ˜¯æ‰§è¡Œä¸€ä¸‹è¿™ä¸ªæŒ‚è½½å‘½ä»¤ã€‚åœ¨ _ä»»åŠ¡è®¡åˆ’_ => _æ–°å¢_ => _è§¦å‘çš„ä»»åŠ¡_ æ·»åŠ ä»¥ `root` ç”¨æˆ·æ‰§è¡Œçš„è„šæœ¬ï¼Œå¦‚ä¸‹ï¼š

```bash
#!/bin/sh
sleep 10
mount -o bind "/volume1/homes" /home
```

## æ€»ç»“

åœ¨è¿™ä¸¤æ­¥é¢å¤–æ“ä½œä¸‹ï¼Œå†å®‰è£… Homebrew å°±æ²¡æœ‰é—®é¢˜äº†ï¼Œæˆ‘å®‰è£…çš„ `rclone` å’Œ `yt-dlp` ä¹Ÿå®Œç¾è¿è¡Œï¼Œç†è®ºä¸Šåº”è¯¥é€‚ç”¨äºä»»ä½• x86_64 å‹å·çš„ DSM 7.x çš„ç³»ç»Ÿã€‚

![neofetch åœ¨ç¾¤æ™– DS220+ ä¸Šçš„è¾“å‡º](Synology_Diskstation_DS220+_neofetch.png)

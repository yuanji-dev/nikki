---
title: "ç»™ Hugo åšå®¢æ–‡ç« è‡ªåŠ¨ç”Ÿæˆåˆ†äº«å›¾"
date: 2021-10-13T20:54:24+09:00
tags: ["Hugo", "open-graph", "twitter-card"]
keywords: ["Hugo", "open-graph", "twitter-card"]
slug: "generating-cover-images-for-hugo-blog-posts"
aliases:
  - "auto-generating-cover-for-post"
---

åœ¨æ­¤ä¹‹å‰ï¼Œå¦‚æœæŠŠæœ¬ç«™çš„æ–‡ç« åˆ†äº«åˆ°ç¤¾äº¤ç½‘ç«™æˆ–æ˜¯ä¼šæŠ“å–å†…å®¹çš„èŠå¤©è½¯ä»¶ï¼Œé€šå¸¸ä¼šæ˜¾ç¤ºæ–‡ç« çš„æ ‡é¢˜å’Œç®€ä»‹ï¼Œä½†å¤šå°‘æ„Ÿè§‰æœ‰ç‚¹å„¿å…‰ç§ƒç§ƒçš„ï¼Œæœ‰ç‚¹å„¿å•è°ƒã€‚å¦‚æœå¯ä»¥åŠ ä¸Šä¸€å¼ åˆ†äº«å›¾ï¼Œåº”è¯¥èƒ½æ˜¾å¾—ç¾è§‚ä¸€äº›ï¼Œä½†æ˜¯ä¸ºæ­¤ä¸“é—¨æ‰¾ä¸€å¼ å…³ç³»ä¸å¤§çš„é…å›¾ï¼Œåˆè§‰å¾—å¾ˆéº»çƒ¦ï¼Œè€Œä¸”æ„Ÿè§‰ä¼šå¯¹äºæœ¬èº«å°±æ›´æ–°é¢‘ç‡ä¸€èˆ¬çš„æœ¬åšå®¢è€Œè¨€ï¼Œæ›´æ˜¯é›ªä¸ŠåŠ éœœã€‚äºæ˜¯æƒ³äº†æƒ³æœ‰æ²¡æœ‰åŠæ³•è‡ªåŠ¨ç”Ÿæˆä¸€å¼ å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚è¿™é‡Œå…ˆæŠŠæœ€ç»ˆçš„æ•ˆæœæ”¾ä¸Šæ¥ï¼Œå†è§£é‡Šå…¶ä¸­çš„ç»†èŠ‚ï¼Œä¸‹å›¾å°±æ˜¯ç»™æœ¬æ–‡è‡ªåŠ¨ç”Ÿæˆçš„åˆ†äº«å›¾ï¼Œå¦‚æœæŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«å‡ºå»ï¼Œæƒ³å¿…å®ƒå°±ä¼šå‡ºç°ã€‚

![cover](cover.png)

<!--more-->

## ç¤ºä¾‹

è¯´èµ·æ¥ï¼Œè¿™ä¸ªåŠŸèƒ½å…¶å®å¹¶ä¸ç½•è§ï¼Œæ¯”å¦‚ä¸€äº›æŠ€æœ¯å‹çš„ç¤¾åŒºç½‘ç«™éƒ½æœ‰ç±»ä¼¼çš„åŠŸèƒ½ï¼Œè‹±è¯­çš„æœ‰ [DEV Community ğŸ‘©â€ğŸ’»ğŸ‘¨â€ğŸ’»](https://dev.to/)ï¼Œæ—¥æ–‡çš„æœ‰ [Qiita](https://qiita.com/) å’Œ [Zenn ï½œã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ãŸã‚ã®æƒ…å ±å…±æœ‰ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£](https://zenn.dev/)ï¼Œå¦‚æœæŠŠè¿™äº›ç½‘ç«™çš„æ–‡ç« åˆ†äº«åˆ°ç¤¾äº¤ç½‘ç»œï¼Œå°±ä¼šä»¥æ ‡é¢˜ï¼Œä½œè€…ç­‰æ–‡ç« çš„å…ƒä¿¡æ¯è‡ªåŠ¨ç”Ÿæˆä¸€å¼ åˆ†äº«çš„å¡ç‰‡ï¼Œæ¯”å¦‚ä¸‹é¢è¿™å¼ å°±æ˜¯ Zenn è‡ªåŠ¨ç”Ÿæˆçš„ã€‚

![zenn demo](zenn-twitter-card-demo.png)

## å·²æœ‰æ–¹æ¡ˆ

ä¸ºäº†é¿å…è‡ªå·±é€ è½®å­ï¼Œè°ƒæŸ¥äº†ä¸€ç•ªï¼Œæœç„¶æœ‰ä¸€äº›æ–¹ä¾¿çš„ç½‘ç«™å¯ä»¥ç”Ÿæˆè¿™æ ·çš„å¡ç‰‡ï¼Œæ¯”å¦‚

- [Open Graph Image as a Service](https://og-image.vercel.app/)
- [GitHub Socialify](https://socialify.git.ci/)

å‰è€…æ˜¯ä¸€ä¸ªè¾ƒä¸ºé€šç”¨çš„è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ URL çš„å‚æ•°è¿›è¡Œå®šåˆ¶ï¼Œåè€…æ˜¯ç»™ GitHub ä¸Šçš„é¡¹ç›®è‡ªåŠ¨ç”Ÿæˆåˆ†äº«å›¾ç‰‡ã€‚

é‚£ï¼Œæ—¢ç„¶å¯ä»¥ç”¨é‚£ä¸ªé€šç”¨çš„ç½‘ç«™ç”Ÿæˆï¼Œæ˜¯ä¸æ˜¯è¿™ç¯‡æ–‡ç« å°±åˆ°æ­¤ç»“æŸäº†å‘¢ï¼Ÿé—®é¢˜æ²¡æœ‰è¿™ä¹ˆç®€å•ï¼Œå› ä¸ºå®ƒå¹¶ä¸æ”¯æŒä¸­æ–‡ã€‚

## tcardgen

æ—¢ç„¶åœ¨çº¿çš„ä¸è¡Œï¼Œåˆæ‰¾äº†æ‰¾ç¦»çº¿çš„å·¥å…·ï¼Œè¿æ°”ä¸é”™è¿˜çœŸè¢«æˆ‘æ‰¾åˆ°ä¸€ä¸ªï¼Œè¿™ä¸ªé¡¹ç›®å« [tcardgen](https://github.com/Ladicle/tcardgen)ï¼Œå·§çš„æ˜¯è¿™ä¸ªå¼€å‘è€…ä¹Ÿæ˜¯ç”¨çš„ Hugo ä½œä¸ºåšå®¢çš„ç”Ÿæˆå™¨ï¼ŒåŸç†ä¹Ÿä¸å¤æ‚ï¼Œé¦–å…ˆæ˜¯æä¾›ä¸€å¼ æ¨¡æ¿å›¾ç‰‡ï¼Œç„¶åç¨‹åºè¯»å–æ–‡ç« çš„ [Front Matter](https://gohugo.io/content-management/front-matter/) éƒ¨åˆ†çš„å…ƒä¿¡æ¯ï¼Œå†æ ¹æ®æŒ‡å®šçš„å­—ä½“å’Œå®šä¹‰çš„ä½ç½®ã€é¢œè‰²ç­‰ä¿¡æ¯ç»˜åˆ¶è€Œæˆã€‚æˆ‘ç›´æ¥å·æ‡’[é­”æ”¹ä¸€ä¸‹ä»–çš„ä»£ç ](https://github.com/masakichi/tcardgen/commit/f97389031d1c2261fad1674d7a92f56448ffda49)å’Œç¤ºä¾‹çš„[æ¨¡æ¿å›¾ç‰‡](https://github.com/Ladicle/tcardgen/tree/master/example)å°±ç”Ÿæˆäº†æ–‡ç« æœ€åˆçš„æœ¬æ–‡çš„åˆ†äº«å›¾ã€‚

è¿™ä¸ªå·¥å…·ç”¨æ³•å¤§è‡´å¦‚ä¸‹ï¼š

```bash
./tcardgen/tcardgen -f tcardgen/font -o ./content/posts/ç»™åšå®¢æ–‡ç« è‡ªåŠ¨ç”Ÿæˆåˆ†äº«å›¾/cover.png -t tcardgen/template.png content/posts/ç»™åšå®¢æ–‡ç« è‡ªåŠ¨ç”Ÿæˆåˆ†äº«å›¾/index.md
```

å¯¹äº†ï¼Œä¸ºäº†è®©ç”Ÿæˆçš„å¡ç‰‡çœ‹ç€è½»æ¾ä¸€äº›ï¼Œç‰¹æ„æ‰¾äº†ä¸ªçœ‹ç€è¿˜ä¸é”™çš„å¼€æºå­—ä½“ï¼Œå«ä½œ[éœé¹œæ–‡æ¥·](https://github.com/lxgw/LxgwWenKai)

## Open Graph

åˆ°ä¸Šä¸€éƒ¨åŸºæœ¬å°±å¤§åŠŸå‘Šæˆäº†ï¼Œä¸è¿‡æˆ‘ä»¬åªæ˜¯å®Œæˆäº†ç”Ÿæˆå›¾ç‰‡çš„éƒ¨åˆ†ï¼Œå¦‚ä½•è®©ç¤¾äº¤ç½‘ç»œæˆ–æ˜¯å…¶ä»–è½¯ä»¶è¯†åˆ«è¿˜éœ€è¦ç¨ä½œè°ƒæ•´ã€‚ä¸»è¦å°±æ˜¯è¦è®©å®ƒä»¬æ‰¾åˆ°è¿™å¼ å›¾ç‰‡ã€‚å®é™…ä¸Šä¹Ÿä¸å¤æ‚ï¼Œå°±æ˜¯åœ¨ HTML çš„ head é‡ŒåŠ ä¸Š [Open Graph](https://ogp.me/) å’Œ [Twitter Card](https://developer.twitter.com/en/docs/twitter-for-websites/cards/overview/summary-card-with-large-image) éœ€è¦çš„ meta æ ‡ç­¾ã€‚

```html
<meta property="og:image" content="http://blog.gimo.me/posts/auto-generating-cover-for-post/cover.png" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="http://blog.gimo.me/posts/auto-generating-cover-for-post/cover.png" />
```

## Hugo çš„æ”¯æŒ

å®é™…ä¸Šï¼ŒHugo å†…ç½®çš„æ¨¡æ¿é‡Œå°±å·²ç»æä¾›äº†ä¸€ä¸ªç¤ºä¾‹ï¼Œç”¨æ¥æ”¯æŒæ”¯æŒ Open Graph å’Œ Twitter Card äº†ï¼Œåªéœ€åœ¨ä¸»é¢˜æ¨¡æ¿é‡Œå¼•å…¥ä¸¤è¡Œå³å¯ï¼š

```go-html-template
{{ template "_internal/opengraph.html" . }}
{{ template "_internal/twitter_cards.html" . }}
```

æ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥æŸ¥çœ‹ Hugo çš„ä»£ç çœ‹å…·ä½“çš„é€»è¾‘ï¼Œç®€å•æ¥è¯´å¦‚æœåœ¨æ–‡ç« çš„ Front Matter é‡Œå®šä¹‰äº†å›¾ç‰‡èµ„æºï¼Œä¼šä¼˜å…ˆä½¿ç”¨ï¼Œå…¶æ¬¡åŒ¹é…å›¾ç‰‡åç§°åŒ…å« featureï¼Œå†æ¬¡æ˜¯å›¾ç‰‡åç§°åŒ…å« cover, thumbnailã€‚å› ä¸ºæ˜¯è‡ªåŠ¨ç”Ÿæˆçš„å›¾ç‰‡ï¼Œæœ¬åšå®¢å°±éƒ½ç»Ÿä¸€å”¤ä½œ cover.png äº†ã€‚

- [hugo/opengraph.html at v0.88.1 Â· gohugoio/hugo](https://github.com/gohugoio/hugo/blob/v0.88.1/tpl/tplimpl/embedded/templates/opengraph.html)
- [hugo/twitter_cards.html at v0.88.1 Â· gohugoio/hugo](https://github.com/gohugoio/hugo/blob/v0.88.1/tpl/tplimpl/embedded/templates/twitter_cards.html)

## æœ€å

æ—¢ç„¶æˆåŠŸç”Ÿæˆäº†ä¸€ç¯‡ï¼Œå¹²è„†ä¸€ä¸åšäºŒä¸ä¼‘å†™ä¸ªå°è„šæœ¬æŠŠä¹‹å‰æ‰€æœ‰çš„æ–‡ç« éƒ½ä¸€å¹¶ç”Ÿæˆå°é¢å›¾äº†ï¼Œç”šè‡³è°ˆä¸ä¸Šè„šæœ¬ï¼Œç›´æ¥æ‰“å¼€ ipythonï¼Œç”¨ globã€subprocess ç­‰å‡ ä¸ªå†…ç½®æ¨¡å—å†™ä¸ªå¾ªç¯äº†äº‹ã€‚æ‰€æœ‰æ”¹åŠ¨éƒ½æµ“ç¼©åœ¨äº† [feat(cover): add cover for all posts Â· masakichi/nikki@6a03c8e](https://github.com/masakichi/nikki/commit/6a03c8e87c9a0180550c94ed74091b341099d797) è¿™ä¸ª commit å½“ä¸­ã€‚

ä»¥ä¸Šå°±æ˜¯è¿™æ¬¡ç»™åšå®¢å¢åŠ çš„ä¸€ç‚¹å°åŠŸèƒ½äº†ã€‚è¯´å®è¯å†™è¿™ç¯‡æ–‡ç« ç€å®æ¯”ç”Ÿæˆåˆ†äº«å›¾è¿™ä»¶äº‹æœ¬èº«è¦è€—æ—¶ï¼Œç¬‘ã€‚
